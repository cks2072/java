<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>회원가입</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <style>
        .member {
            width: 700px;
            margin-left: auto; margin-right: auto;
        }
        .member_box {
            width: 630px;
            margin-left: auto; margin-right: auto;
        }
        .checkbox {
            width: 630px;
            padding: 10px;
            border: 1px solid gray;
            margin-bottom: 20px;
            margin-left: auto; margin-right: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="member">
            <h1 class="text-center mt-5"><strong>회원가입</strong></h1>
            <hr>
            <form>
                <div class="member_box">
                    <div class="mb-3 mt-4">
                    <label for="name" class="form-label">이름</label>
                    <input type="name" class="form-control" id="name">
                    </div>
                    <div class="mb-3">
                    <label for="email" class="form-label">이메일</label>
                    <input type="email" class="form-control" id="email">
                    </div>
                    <div class="mb-3">
                        <label for="number" class="form-label">휴대전화</label>
                        <input type="" class="form-control" id="number" maxlength='12'>
                    </div>
                    <div class="mb-3">
                        <label for="password" class="form-label">비밀번호</label>
                        <input type="password" class="form-control" id="password" maxlength='14'>
                    </div>
                    <div class="mb-3">
                        <label for="password2" class="form-label">비밀번호 확인</label>
                        <input type="password" class="form-control" id="password2" maxlength='14'>
                    </div>
                </div>
                <hr>
                <p><strong>서비스정책</strong></p>
                <hr>
            <div class="gree_box">
                <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="allcheck">
                        <label class="form-check-label" for="allcheck">
                            전체 동의
                        </label>
                </div>
                    <div class="form-check" id="box1">
                            <input class="form-check-input chk check1" type="checkbox">
                            <label class="form-check-label" for="check1">
                                [필수] 만 14세 이상입니다.
                            </label><br>
                            <input class="form-check-input chk check2" type="checkbox">
                            <label class="form-check-label" for="check2">
                                [필수] 서비스 이용약관 동의
                            </label><br>
                            <input class="form-check-input chk check3" type="checkbox">
                            <label class="form-check-label" for="check3">
                                [필수] 개인정보 수집 및 이용 동의
                            </label><br>
                    </div>
                    <div class="form-check" id="box2">
                            <input class="form-check-input chk check4" type="checkbox">
                            <label class="form-check-label" for="check4">
                                [선택] 마케팅 수신 동의
                            </label><br>
                            <input class="form-check-input chk check5" type="checkbox">
                            <label class="form-check-label" for="check5">
                                [선택] 위치정보 이용약관 동의
                            </label>
                    </div>
                </div>
                    <hr>
                <div>
                    <button type="button" class="btn btn-warning col-12" disabled="disabled" id="membership">회원가입</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        const all_chk = document.querySelector('#allcheck')
        // console.log(all_chk)

        const chk_item = document.querySelectorAll('.chk')
        const all_chk_len = chk_item.length
        // console.log(all_chk_len)

        const mbship = document.querySelector('#membership')
        // console.log(mbship, mbship.getAttribute('disabled'))

        const chk1_box = document.querySelectorAll('#box1 .chk')
        // console.log(chk1_box)
        const chk1_box_len = chk1_box.length
        const chk2_box = document.querySelectorAll('#box2 .chk')
        // console.log(chk2_box)

        chk1_box.forEach((chk)=>{
            chk.addEventListener('change',(e)=>{
                chkCntFun()
                chkAllCntFun()
            })
        })

        function chkCntFun () {
            let count = 0
            chk1_box.forEach((chk)=>{
                if (chk.checked){
                count++
                }
            })
            console.log('필수항목 체크 개수 :',count, chk1_box_len)
            if (count >= chk1_box_len) {
                mbship.removeAttribute('disabled')
            } else {
                mbship.setAttribute('disabled',true)
            }
        }
        
        chk2_box.forEach((chk)=>{
            chk.addEventListener('change',(e)=>{
                chkAllCntFun()
            })
        })

        function chkAllCntFun(){
            let count = 0
            chk1_box.forEach((chk)=>{
                if (chk.checked){
                    count++
                }
            })
            chk2_box.forEach((chk)=>{
                if (chk.checked){
                    count++
                }
            })

            if (count>=all_chk_len) {
                mbship.removeAttribute('disabled')
                all_chk.checked = true
            } else {
                all_chk.checked = false
            }
        }

        all_chk.addEventListener('change',(e)=>{
            allCheckedFun(e.target.checked)
        })
        
        function allCheckedFun(isCheck){
            chk_item.forEach((chk)=>{
                if (isCheck === true)
                    chk.checked = true
                else
                    chk.checked = false
            })
            
            if (isCheck === true)
             mbship.removeAttribute('disabled')
            else
             mbship.setAttribute('disabled',true)
        }

        mbship.addEventListener('click',()=>{
            alert('회원가입이 완료되었습니다.')
        })
    </script>
</body>
</html>